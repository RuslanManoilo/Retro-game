!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},s={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in i)return i[e].exports;if(e in s){var t=s[e];delete s[e];var r={id:e,exports:{}};return i[e]=r,t.call(r.exports,r,r.exports),r.exports}var h=new Error("Cannot find module '"+e+"'");throw h.code="MODULE_NOT_FOUND",h}).register=function(e,t){s[e]=t},t.parcelRequired7c6=r),r.register("gD1JV",(function(e,t){"use strict";function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return i(e,t)}})),r.register("aTHs7",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}})),r.register("fVNic",(function(e,t){"use strict";function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return i(e)}})),r.register("jmhxu",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e,t){return!t||"object"!==s.default(t)&&"function"!=typeof t?i.default(e):t};var i=h(r("ds8z5")),s=h(r("l5bVx"));function h(e){return e&&e.__esModule?e:{default:e}}})),r.register("ds8z5",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}})),r.register("l5bVx",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.default=function(e){return e&&e.constructor===Symbol?"symbol":typeof e}}));var h={};Object.defineProperty(h,"__esModule",{value:!0}),h.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var n={};function o(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(e,t,i){t&&o(e.prototype,t);i&&o(e,i);return e};var a=function(){"use strict";function t(i){e(h)(this,t),this.game=i,this.width=100,this.height=100,this.x=.5*this.game.width-.5*this.width,this.y=this.game.height-this.height,this.speed=5,this.lives=3}return e(n)(t,[{key:"draw",value:function(e){e.fillRect(this.x,this.y,this.width,this.height)}},{key:"update",value:function(){this.game.keys.indexOf("ArrowLeft")>-1&&(this.x-=this.speed),this.game.keys.indexOf("ArrowRight")>-1&&(this.x+=this.speed),this.x<.5*-this.width?this.x=.5*-this.width:this.x>this.game.width-.5*this.width&&(this.x=this.game.width-.5*this.width)}},{key:"shoot",value:function(){var e=this.game.getProjectile();e&&e.start(this.x+.5*this.width,this.y)}},{key:"restart",value:function(){this.x=.5*this.game.width-.5*this.width,this.y=this.game.height-this.height,this.lives=3}}]),t}(),u=function(){"use strict";function t(){e(h)(this,t),this.width=30,this.height=20,this.x=0,this.y=0,this.speed=20,this.free=!0}return e(n)(t,[{key:"draw",value:function(e){this.free||e.fillRect(this.x,this.y,this.width,this.height)}},{key:"update",value:function(){this.free||(this.y-=this.speed),this.y<-this.height&&this.reset()}},{key:"start",value:function(e,t){this.x=e-.5*this.width,this.y=t,this.free=!1}},{key:"reset",value:function(){this.free=!0}}]),t}(),l={};Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c.default(e,t)};var f,c=(f=r("gD1JV"))&&f.__esModule?f:{default:f};var d={};Object.defineProperty(d,"__esModule",{value:!0}),d.default=function(e){var t=y.default();return function(){var i,s=m.default(e);if(t){var r=m.default(this).constructor;i=Reflect.construct(s,arguments,r)}else i=s.apply(this,arguments);return p.default(this,i)}};var y=v(r("aTHs7")),m=v(r("fVNic")),p=v(r("jmhxu"));function v(e){return e&&e.__esModule?e:{default:e}}var g=function(t){"use strict";e(l)(s,t);var i=e(d)(s);function s(t,r,n){var o;return e(h)(this,s),(o=i.call(this,t,r,n)).image=document.getElementById("beetlemorph"),o.frameX=0,o.maxFrame=2,o.frameY=Math.floor(4*Math.random()),o.lives=1,o.maxLives=o.lives,o}return s}(function(){"use strict";function t(i,s,r){e(h)(this,t),this.game=i,this.width=this.game.enemySize,this.height=this.game.enemySize,this.x=0,this.y=0,this.positionX=s,this.positionY=r,this.markedForDeletion=!1}return e(n)(t,[{key:"draw",value:function(e){e.drawImage(this.image,this.frameX*this.width,this.frameY*this.height,this.width,this.height,this.x,this.y,this.width,this.height)}},{key:"update",value:function(e,t){var i=this;this.x=e+this.positionX,this.y=t+this.positionY,this.game.projectilesPool.forEach((function(e){!e.free&&i.game.checkCollision(i,e)&&(i.hit(1),e.reset())})),this.lives<1&&(this.frameX++,this.frameX>this.maxFrame&&(this.markedForDeletion=!0,this.game.gameOver||(this.game.score+=this.maxLives))),this.game.checkCollision(this,this.game.player)&&(this.markedForDeletion=!0,!this.game.gameOver&&this.game.score>0&&this.game.score--,this.game.player.lives--,this.game.player.lives<1&&(this.game.gameOver=!0)),this.y+this.height>this.game.height&&(this.game.gameOver=!0,this.markedForDeletion=!0)}},{key:"hit",value:function(e){this.lives-=e}}]),t}()),w=function(){"use strict";function t(i){e(h)(this,t),this.game=i,this.width=this.game.columns*this.game.enemySize,this.height=this.game.rows*this.game.enemySize,this.x=.5*this.game.width-.5*this.width,this.y=-this.height,this.speedX=Math.random()<.5?-3:3,this.speedY=0,this.enemies=[],this.nextWaveTrigger=!1,this.create()}return e(n)(t,[{key:"render",value:function(e){var t=this;this.y<0&&(this.y+=5),this.speedY=0,(this.x<0||this.x>this.game.width-this.width)&&(this.speedX*=-1,this.speedY=this.game.enemySize),this.x+=this.speedX,this.y+=this.speedY,this.enemies.forEach((function(i){i.update(t.x,t.y),i.draw(e)})),this.enemies=this.enemies.filter((function(e){return!e.markedForDeletion}))}},{key:"create",value:function(){for(var e=0;e<this.game.rows;e++)for(var t=0;t<this.game.columns;t++){var i=t*this.game.enemySize,s=e*this.game.enemySize;this.enemies.push(new g(this.game,i,s))}}}]),t}(),x=function(){"use strict";function t(i){var s=this;e(h)(this,t),this.canvas=i,this.width=this.canvas.width,this.height=this.canvas.height,this.keys=[],this.player=new a(this),this.projectilesPool=[],this.numberOfProjectiles=10,this.createProjectiles(),this.fired=!1,this.columns=2,this.rows=2,this.enemySize=80,this.waves=[],this.waves.push(new w(this)),this.waveCount=1,this.score=0,this.gameOver=!1,window.addEventListener("keydown",(function(e){"1"!==e.key||s.fired||s.player.shoot(),s.fired=!0,-1===s.keys.indexOf(e.key)&&s.keys.push(e.key),"r"===e.key&&s.gameOver&&s.restart()})),window.addEventListener("keyup",(function(e){s.fired=!1;var t=s.keys.indexOf(e.key);t>-1&&s.keys.splice(t,1)}))}return e(n)(t,[{key:"render",value:function(e){var t=this;this.drawStatusText(e),this.player.draw(e),this.player.update(),this.projectilesPool.forEach((function(t){t.update(),t.draw(e)})),this.waves.forEach((function(i){i.render(e),i.enemies.length<1&&!i.nextWaveTrigger&&!t.gameOver&&(t.newWave(),t.waveCount++,i.nextWaveTrigger=!0,t.player.lives++)}))}},{key:"createProjectiles",value:function(){for(var e=0;e<this.numberOfProjectiles;e++)this.projectilesPool.push(new u)}},{key:"getProjectile",value:function(){for(var e=0;e<this.projectilesPool.length;e++)if(this.projectilesPool[e].free)return this.projectilesPool[e]}},{key:"checkCollision",value:function(e,t){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}},{key:"drawStatusText",value:function(e){e.save(),e.shadowOffsetX=2,e.shadowOffsetY=2,e.shadowColor="violet",e.fillText("Score: "+this.score,20,40),e.fillText("Wave: "+this.waveCount,20,80);for(var t=0;t<this.player.lives;t++)e.fillRect(20+10*t,100,5,20);this.gameOver&&(e.textAlign="center",e.font="100px Impact",e.fillText("GAME OVER",.5*this.width,.5*this.height),e.font="20px Impact",e.fillText("Press R to restart!",.5*this.width,.5*this.height+30)),e.restore()}},{key:"newWave",value:function(){Math.random()<.5&&this.columns*this.enemySize<.8*this.width?this.columns++:this.rows*this.enemySize<.6*this.width&&this.rows++,this.waves.push(new w(this))}},{key:"restart",value:function(){this.player.restart(),this.columns=2,this.rows=2,this.waves=[],this.waves.push(new w(this)),this.waveCount=1,this.score=0,this.gameOver=!1}}]),t}();window.addEventListener("load",(function(){var e=document.getElementById("canvas1"),t=e.getContext("2d");e.width=600,e.height=800,t.fillStyle="white",t.strokeStyle="white",t.lineWidth=5,t.font="30px impact";var i=new x(e);!function s(){t.clearRect(0,0,e.width,e.height),i.render(t),requestAnimationFrame(s)}()}))}();
//# sourceMappingURL=index.65046ae7.js.map
